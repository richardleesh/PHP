<html><body style="width:80%; margin: auto; margin-top:100px;"><?php/*Student DeclarationI/we declare that the attached assignment is my/our own work in accordance with Seneca Academic Policy. No part of this assignment has been copied manually or electronically from any other source (including web sites) or distributed to other students.Name:  Student ID: *///read file cellphones.txt to array, use it for drop down menufunction readdata($phonefile='/home/int322_161c06/apache/cgi-bin/assign1/cellphones.txt'){	$cellphones = file('/home/int322_161c06/apache/cgi-bin/assign1/cellphones.txt');	$cellphones = explode(',', $cellphones[0]);	return $cellphones;}$cellphones = readdata();$cellphonesErr="";$minimumErr="";$maximumErr="";$dataValid = true;if($_POST){						if( (!isset($_POST['cellphones'])) || $_POST['cellphones']=="--Please choose--"){			$cellphonesErr ="Must select select a phone";			$dataValid = false;		}		if(!isset($_POST['minimum']) || !is_numeric($_POST['minimum']) ||  $_POST['minimum']<0){			$minimumErr="Must be a number and greater or equal 0";			$dataValid = false;		}		if(!isset($_POST['maximum']) || !is_numeric($_POST['maximum']) ||  (isset($_POST['minimum']) && $_POST['maximum']< $_POST['minimum']) ){			$maximumErr="Must be a number and greater than minimum";			$dataValid = false;		}} if ($_POST && $dataValid){			//read phone names from file cellphones.txt,OS.txt,Model.txt and price.txt, 	//parse data to arrays. 	$cellphones = file('/home/int322_161c06/apache/cgi-bin/assign1/cellphones.txt');	$cellphones = explode(',', $cellphones[0]);	$model = file('/home/int322_161c06/apache/cgi-bin/assign1/Model.txt');	$model = explode(',', $model[0]);	$price = file('/home/int322_161c06/apache/cgi-bin/assign1/price.txt');	$price = explode(',', $price[0]);	$os = file('/home/int322_161c06/apache/cgi-bin/assign1/OS.txt');	$os = explode(',', $os[0]);	$dataArray = array("itemName"=>$cellphones,"model"=>$model,"price"=>$price,"os"=>$os);	// For debugging purposes	//print_r($dataArray);	//Insert data into table phones in the int322_161c06 database 	//read login infomation	$lines = file('/home/int322_161c06/secret/topsecret');	$dbserver = trim($lines[0]);	$uid = trim($lines[1]);	$pw = trim($lines[2]);	$dbname = trim($lines[3]);	//connect to database	$link=mysqli_connect($dbserver,$uid,$pw,$dbname) or die("could not conect to server".mysqli_erro($link));	$deletequery="delete from phones";	mysqli_query($link,$deletequery) or die("query failed".mysqli_erro($insertdata));	//insert data to table phones	for($i=0; $i<count($dataArray["itemName"]); $i++){		$itemName=$dataArray["itemName"][$i];		$model=$dataArray["model"][$i];		$price=$dataArray["price"][$i];		$os=$dataArray["os"][$i];	   		$query='insert into phones set itemName="'.$itemName.'",									   model="'.$model.'",									   price='.$price.',									   os="'.$os.'"';								   	   	   $insertdata=mysqli_query($link,$query) or die("query failed".mysqli_erro($insertdata));	}								 	//SQL Query	$searchQuery='select *, now() from phones where itemName="'.$_POST["cellphones"].'" AND price between '.$_POST['minimum'].' and '.$_POST['maximum'];												// For debugging purposes	//print($searchQuery);	//Run sql query	$result = mysqli_query($link, $searchQuery) or die('query failed'. mysqli_error($link));		//$rows=mysqli_fetch_assoc($result);	$querydate="select now()";	$dateresult = mysqli_query($link, $querydate) or die('query failed'. mysqli_error($link));	$date=mysqli_fetch_assoc($dateresult);	//echo $date['now()'];	/*	//loop through search result display it	while($rows=mysqli_fetch_assoc($result))	{   		echo "search result:<br/>";		echo $rows[itemName].'---'.$rows["model"].'---'.$rows["price"].'---'.$rows["os"]."<br/>";				}		echo "search result:"."<br/>";	echo "found ".$i." matched "."<br/>";	*/		//display search result	echo 'Query date: '.$date["now()"]."<br/>";	echo "Search Result:    ";	echo "Find ".$result->num_rows." "." phones matched<br/>";	if($result->num_rows) {		while($rows=mysqli_fetch_assoc($result))	{   		//echo "search result:<br/>";		echo $rows[itemName].'---'.$rows["model"].'---$'.$rows["price"].'---'.$rows["os"]."<br/>";				}	}	//echo "Find ".$result->num_rows." ".$rows['itemName']." phones matched<br/>";	else  echo "No matched"."<br/>";		$result->close();	mysqli_close ($link);		}else{?>		<form style="margin: auto;" method="POST" action= "" >	    <h2 style="margin:auto; border: 5px solid red; text-align:center;">Assignment 1 An Online PHP Product Comparison Tool</h2>	<br/>	<br/>	<br/>	<table style="margin:auto;" >		 	    		<tr>		<td style="text-align:right;">Slect a Phone</td>    	<td>							<select name="cellphones">			<option>--Please choose--</option>						<?php			    foreach($cellphones as $phonename){			?>					<option value="<?php echo $phonename;?>" ><?php echo $phonename;?></option>			<?php				}			?>									</select>						</td><td>  <?php echo $cellphonesErr;?> </td>		</tr>		    <tr>		<td style="text-align:right;">Minimum</td> <td><input type=text name="minimum" value="<?php if(isset($_POST['minimum'])) echo $_POST['minimum'] ?>"/></td>  <td> <?php echo $minimumErr  ?> </td>	</tr>			<tr>		<td style="text-align:right;">Maximum</td> <td><input type=text name="maximum" value="<?php if(isset($_POST['maximum'])) echo $_POST['maximum'] ?>"/></td>   <td><?php echo $maximumErr  ?></td>	</tr>		<tr>	<td></td>	<td><input name="submit" type="submit" value ="Search!"></td>	</tr>  </form><?php}?></body></html>